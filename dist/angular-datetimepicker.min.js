"use strict";!function(){if(!("moment"in window))return console.error("Moment.js is missing.");$.datetimepicker.setDateFormatter({parseDate:function(t,e){var n=moment(t,e);return!!n.isValid()&&n.toDate()},formatDate:function(t,e){return moment(t).format(e)}});var t=angular.module("datetimePicker",[]);t.constant("datetimePickerConfig",{translations:{none:"None",today:"Today",yesterday:"Yesterday",lastWeek:"Last week",lastMonth:"Last month"}}),t.directive("datetimePicker",function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){var r=n.unixtime||"YYYY/MM/DD HH:mm";e.datetimepicker({format:r,formatDate:"YYYY/MM/DD",formatTime:"HH:mm"}),i&&i.$parsers.push(function(t){return void 0===t?t:i.$isEmpty(t)?null:t})}}}),t.directive("datetimeRangePicker",["datetimePickerConfig",function(t){return{restrict:"E",scope:{datetimeRangePicker:"="},template:'<input datetime-picker unixtime ng-model="datetimeRangePicker.start">&nbsp;-&nbsp;<input datetime-picker unixtime ng-model="datetimeRangePicker.end">&nbsp;&nbsp;<select ng-model="model.range" ng-options="interval.title for interval in intervals"></select>',controller:["$scope",function(e){e.intervals=[{title:t.translations.none,start:void 0,end:void 0},{title:t.translations.today,start:moment().startOf("day").unix(),end:moment().endOf("day").unix()},{title:t.translations.yesterday,start:moment().subtract(1,"days").startOf("day").unix(),end:moment().subtract(1,"days").endOf("day").unix()},{title:t.translations.lastWeek,start:moment().subtract(1,"weeks").startOf("day").unix(),end:moment().unix()},{title:t.translations.lastMonth,start:moment().subtract(1,"months").startOf("month").unix(),end:moment().subtract(1,"months").endOf("month").unix()}],e.model={range:e.intervals[0]},e.$watch("model.range",function(t){e.datetimeRangePicker||(e.datetimeRangePicker={}),e.datetimeRangePicker.start=t.start,e.datetimeRangePicker.end=t.end})}]}}]),t.directive("unixtime",function(){return{require:"?ngModel",restrict:"A",link:function(t,e,n,i){var r=n.unixtime||"YYYY/MM/DD HH:mm";i.$formatters.push(function(t){return t?moment.unix(t).format(r):t}),i.$parsers.push(function(t){return t?moment(t,r).unix():t})}}})}();